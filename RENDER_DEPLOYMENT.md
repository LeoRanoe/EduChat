# ğŸš€ EduChat Render Deployment - Quick Setup Guide

## âœ… Pre-Deployment Checklist

### 1. Database Setup (Supabase)
- [ ] Supabase project created
- [ ] Tables created via SQL Editor (`prisma/create_tables.sql`)
- [ ] RLS policies applied (`prisma/rls_policies.sql`)
- [ ] Sample data seeded (optional: `python seed_data.py`)
- [ ] Connection tested (`python test_service.py`)

### 2. Code Repository
- [ ] Code pushed to GitHub
- [ ] All changes committed
- [ ] Branch: `main` or `feat/supabase`

### 3. Environment Variables Ready
- [ ] `DATABASE_URL` - Supabase connection string
- [ ] `SUPABASE_URL` - Supabase API URL
- [ ] `SUPABASE_ANON_KEY` - Public key
- [ ] `SUPABASE_SERVICE_ROLE_KEY` - Secret key
- [ ] `OPENAI_API_KEY` or `GOOGLE_AI_API_KEY` - AI service key
- [ ] `SESSION_SECRET` - Will be auto-generated by Render

---

## ğŸ¯ Deployment Steps (10 minutes)

### Step 1: Create Render Web Service (2 min)

1. Go to https://dashboard.render.com/
2. Click **"New +"** â†’ **"Web Service"**
3. Connect your GitHub account
4. Select the `EduChat` repository
5. Render detects `render.yaml` automatically âœ…

### Step 2: Configure Service (3 min)

Render will auto-fill from `render.yaml`:
- **Name:** educhat
- **Environment:** Python
- **Region:** Oregon (or choose closest)
- **Branch:** main
- **Build Command:** âœ… Auto-configured
- **Start Command:** âœ… Auto-configured

### Step 3: Add Environment Variables (5 min)

Click **"Environment"** tab and add:

```bash
# Required
DATABASE_URL=postgresql://postgres:[PASSWORD]@db.yeqfvvekdwtawbpusluu.supabase.co:5432/postgres
SUPABASE_URL=https://yeqfvvekdwtawbpusluu.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
OPENAI_API_KEY=sk-...

# Optional (Render auto-generates)
SESSION_SECRET=[Click "Generate Value"]
APP_ENV=production
DEBUG=False
```

### Step 4: Deploy!

1. Click **"Create Web Service"**
2. Wait 10-15 minutes for first build
3. Watch logs for progress
4. App will be live at: `https://educhat-XXXX.onrender.com`

---

## ğŸ” Post-Deployment Verification

### Test Your Deployment

1. **Check Health:**
   ```bash
   curl https://your-app.onrender.com/
   ```

2. **View Logs:**
   - Render Dashboard â†’ Your Service â†’ Logs
   - Look for: `âœ… Supabase connection successful`

3. **Test Features:**
   - [ ] Homepage loads
   - [ ] Can navigate pages
   - [ ] Database queries work
   - [ ] AI chatbot responds

### Monitor Application

- **Logs:** Real-time in Render dashboard
- **Metrics:** CPU, Memory usage in Render dashboard
- **Alerts:** Set up in Render settings

---

## ğŸ› Common Issues & Solutions

### Issue: Build Fails

**Error:** `Could not install requirements`

**Fix:** 
```bash
# Test locally first
pip install -r requirements.txt
```

### Issue: Database Connection Fails

**Error:** `Could not find the table 'public.institutions'`

**Fix:**
1. Go to Supabase SQL Editor
2. Run `prisma/create_tables.sql`
3. Verify tables exist
4. Redeploy on Render

### Issue: Environment Variables Missing

**Error:** `SUPABASE_URL is not set`

**Fix:**
1. Render Dashboard â†’ Environment
2. Add missing variables
3. Click **"Manual Deploy"**

### Issue: App Sleeps (Free Tier)

**Behavior:** First request after 15min takes 30 seconds

**Solutions:**
- Upgrade to Starter ($7/mo) - no sleep
- Use external uptime monitor (ping every 10min)
- Accept cold start delay

---

## ğŸ“Š Files Created for Render

### Configuration Files:
- âœ… `render.yaml` - Render service configuration
- âœ… `start.sh` - Startup script with health checks
- âœ… `.renderignore` - Exclude unnecessary files from build
- âœ… `requirements.txt` - Updated with production dependencies

### Documentation:
- âœ… `Documents/render-deployment.md` - Complete deployment guide
- âœ… `.env.example` - Updated with all required variables
- âœ… `RENDER_DEPLOYMENT.md` - This quick start guide

### Production Config:
- âœ… `rxconfig.py` - Updated for production environment

---

## ğŸ¨ Optional: Custom Domain

1. Go to Render Dashboard â†’ Your Service â†’ Settings
2. Click **"Custom Domain"**
3. Add your domain (e.g., `educhat.com`)
4. Update DNS records at your domain registrar:
   ```
   Type: CNAME
   Name: @
   Value: educhat-XXXX.onrender.com
   ```
5. SSL certificate auto-generated (free) âœ…

---

## ğŸ“ˆ Monitoring & Maintenance

### Auto-Deployments

Every `git push` to main branch triggers:
1. Automatic build
2. Zero-downtime deployment
3. Automatic rollback if build fails

### Manual Deploy

When needed:
1. Render Dashboard â†’ Your Service
2. Click **"Manual Deploy"**
3. Select branch
4. Deploy

### View Logs

```bash
# Real-time logs in dashboard
# Or use Render CLI:
render logs -f
```

---

## ğŸ’° Cost Estimation

### Free Tier:
- âœ… 512 MB RAM
- âœ… 750 hours/month (enough for 1 service)
- âœ… Sleeps after 15min inactivity
- âœ… **Cost: $0/month**

### Starter Tier (Recommended):
- âœ… 2 GB RAM
- âœ… No sleep
- âœ… Better performance
- âœ… **Cost: $7/month**

### Supabase:
- âœ… Free tier: 500 MB database
- âœ… **Cost: $0/month** (sufficient for development)

---

## ğŸ”— Quick Links

- [Render Dashboard](https://dashboard.render.com/)
- [Supabase Dashboard](https://supabase.com/dashboard)
- [GitHub Repository](https://github.com/YOUR_USERNAME/educhat)
- [Deployment Logs](#) - (Link appears after first deploy)

---

## ğŸ†˜ Need Help?

1. **Check Render Logs** - Most issues show up here
2. **Review `render-deployment.md`** - Detailed troubleshooting
3. **Test Locally** - Use production env vars
4. **Render Status** - [status.render.com](https://status.render.com)

---

**ğŸ‰ You're ready to deploy!**

Next: Click "Create Web Service" in Render Dashboard
